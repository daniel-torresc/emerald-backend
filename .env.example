# =============================================================================
# EMERALD BACKEND - ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and update with your actual values
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_NAME="Emerald Finance Platform"
VERSION="0.1.0"
ENVIRONMENT="development"  # development, staging, production
DEBUG=true

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
HOST="0.0.0.0"
PORT=8000
RELOAD=true  # Auto-reload on code changes (development only)

# -----------------------------------------------------------------------------
# Security Settings
# -----------------------------------------------------------------------------
# IMPORTANT: Generate a strong random secret key for production
# Use: openssl rand -hex 32
SECRET_KEY="your-secret-key-here-change-in-production-use-openssl-rand-hex-32"

# JWT Token Configuration
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Hashing (Argon2id configuration)
ARGON2_TIME_COST=2
ARGON2_MEMORY_COST=65536  # 64 MB
ARGON2_PARALLELISM=4

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql+asyncpg://username:password@host:port/database
DATABASE_URL="postgresql+asyncpg://emerald_user:emerald_password@localhost:5432/emerald_db"

# Connection Pool Settings
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_RECYCLE=3600  # Recycle connections after 1 hour
DB_POOL_PRE_PING=true

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_URL="redis://localhost:6379/0"
REDIS_MAX_CONNECTIONS=10

# -----------------------------------------------------------------------------
# CORS Settings
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
# Use "*" only for development, specify exact origins in production
CORS_ORIGINS="http://localhost:3000,http://localhost:8000"
CORS_ALLOW_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true

# Login endpoint: 5 attempts per 15 minutes
RATE_LIMIT_LOGIN="5/15minute"

# Registration endpoint: 3 attempts per hour
RATE_LIMIT_REGISTER="3/hour"

# Password change endpoint: 3 attempts per hour
RATE_LIMIT_PASSWORD_CHANGE="3/hour"

# Token refresh endpoint: 10 attempts per hour
RATE_LIMIT_TOKEN_REFRESH="10/hour"

# General API: 100 requests per minute
RATE_LIMIT_API="100/minute"

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL="DEBUG"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT="json"  # json, console
LOG_FILE_ENABLED=true
LOG_FILE_PATH="logs/app.log"
LOG_FILE_MAX_BYTES=10485760  # 10 MB
LOG_FILE_BACKUP_COUNT=5

# -----------------------------------------------------------------------------
# Audit Logging
# -----------------------------------------------------------------------------
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years for financial compliance

# -----------------------------------------------------------------------------
# Superuser Configuration (for Database Migration)
# -----------------------------------------------------------------------------
# REQUIRED: Set these values before running database migrations!
# The initial superuser is created automatically during database migration
# via 'alembic upgrade head'. This only happens once - if an admin user
# already exists, the migration will skip superuser creation (idempotent).

SUPERADMIN_USERNAME="admin"
SUPERADMIN_EMAIL="admin@example.com"
SUPERADMIN_PASSWORD="CHANGE_THIS_SECURE_PASSWORD_123!"
SUPERADMIN_FULL_NAME="System Administrator"

# Optional: Override default permissions (defaults to full admin access)
# SUPERADMIN_PERMISSIONS='["users:read:all","users:write:all","admin:manage:all"]'

# -----------------------------------------------------------------------------
# Testing Configuration
# -----------------------------------------------------------------------------
# Separate test database (used only during tests)
TEST_DATABASE_URL="postgresql+asyncpg://emerald_user:emerald_password@localhost:5432/emerald_test_db"

# -----------------------------------------------------------------------------
# External Services (Future use)
# -----------------------------------------------------------------------------
# Plaid API (for bank account aggregation - Phase 2)
# PLAID_CLIENT_ID=""
# PLAID_SECRET=""
# PLAID_ENVIRONMENT="sandbox"  # sandbox, development, production

# Email Service (for notifications - Future phases)
# SMTP_HOST=""
# SMTP_PORT=587
# SMTP_USERNAME=""
# SMTP_PASSWORD=""
# SMTP_FROM_EMAIL=""

# Sentry (for error tracking - Production)
# SENTRY_DSN=""

# -----------------------------------------------------------------------------
# Feature Flags (Future use)
# -----------------------------------------------------------------------------
# FEATURE_BANK_SYNC_ENABLED=false
# FEATURE_AI_INSIGHTS_ENABLED=false
# FEATURE_BUDGETING_ENABLED=false
